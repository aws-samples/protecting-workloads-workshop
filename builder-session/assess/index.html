



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="This workshop shows how you can protect a web site using AWS Security Services">
      
      
        <link rel="canonical" href="https://protecting-workloads.awssecworkshops.com/builder-session/assess/">
      
      
        <meta name="author" content="aws-security-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>Assess Phase - Protecting Workloads With AWS WAF, Amazon Inspector and AWS Systems Manager</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#supercharging-your-workload-defenses-assess-phase" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

    <!-- Top-level navigation -->
    <nav class="md-header-nav md-grid">
      <div class="md-flex">
  
        <!-- Link to home -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://aws.amazon.com/"
              title="Amazon Web Services"
              class="md-header-nav__button md-logo">
            
              <img src="../../assets/images/aws_smile_logo.png" width="40" height="24" />
            
          </a>
        </div>
  
        <!-- Button to toggle drawer -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button"
              for="__drawer"></label>
        </div>
  
        <!-- Header title -->
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title"
              data-md-component="title">
            
              
                <span class="md-header-nav__topic">
                  Protecting Workloads With AWS WAF, Amazon Inspector and AWS Systems Manager
                </span>
                <span class="md-header-nav__topic">
                  Assess Phase
                </span>
              
            
          </div>
        </div>
        
        
        <!-- Button to open search dialogue -->
        <!--
        <div class="md-flex__cell md-flex__cell--shrink">
          
            
              <label class="md-icon md-icon--search md-header-nav__button"
                  for="__search"></label>
  
              
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        </div>

         -->
         
         <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-flex__ellipsis md-header-nav__lang">
                <div>
                    <button onclick="window.location.href = 'https://awssecworkshops.com/';" class="md-lang-dropbtn fa fa-home"></button>
                </div>
            </div>
        </div>
  
        <!-- Repository containing source -->
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/aws-samples/protecting-workloads-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/protecting-workloads-workshop
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../workshop/" title="Workshop" class="md-tabs__link">
          Workshop
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Builder Session" class="md-tabs__link md-tabs__link--active">
          Builder Session
        </a>
      
    </li>
  

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Main navigation -->
<nav class="md-nav md-nav--primary" data-md-level="0">

  <!-- Site title -->
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://protecting-workloads.awssecworkshops.com/"
        title="Protecting Workloads With AWS WAF, Amazon Inspector and AWS Systems Manager" class="md-nav__button md-logo">
      
        <img src="../../assets/images/aws_smile_logo.png" width="48" height="48" />
      
    </a>
    
  </label>

  <!-- Repository containing source -->
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/protecting-workloads-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/protecting-workloads-workshop
  </div>
</a>
    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Workshop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Workshop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/" title="Scenario" class="md-nav__link">
      Scenario
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Perimeter Layer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Perimeter Layer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/perimeter-layer/build/" title="Build Phase" class="md-nav__link">
      Build Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/perimeter-layer/assess/" title="Assess Phase" class="md-nav__link">
      Assess Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/perimeter-layer/remediate/" title="Remediate Phase" class="md-nav__link">
      Remediate Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/perimeter-layer/verify/" title="Verify Phase" class="md-nav__link">
      Verify Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/perimeter-layer/cleanup/" title="Cleanup Phase" class="md-nav__link">
      Cleanup Phase
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Host Layer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Host Layer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/host-layer/build/" title="Build Phase" class="md-nav__link">
      Build Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/host-layer/assess/" title="Assess Phase" class="md-nav__link">
      Assess Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/host-layer/remediate/" title="Remediate Phase" class="md-nav__link">
      Remediate Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/host-layer/verify/" title="Verify Phase" class="md-nav__link">
      Verify Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/host-layer/cleanup/" title="Cleanup Phase" class="md-nav__link">
      Cleanup Phase
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workshop/cleanup/" title="Cleanup" class="md-nav__link">
      Cleanup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Builder Session
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Builder Session
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Scenario" class="md-nav__link">
      Scenario
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build/" title="Build Phase" class="md-nav__link">
      Build Phase
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Assess Phase
      </label>
    
    <a href="./" title="Assess Phase" class="md-nav__link md-nav__link--active">
      Assess Phase
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examine-the-stack-that-you-built" title="Examine the stack that you built" class="md-nav__link">
    Examine the stack that you built
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assess-the-host-layer" title="Assess the Host Layer" class="md-nav__link">
    Assess the Host Layer
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-amazon-inspector" title="Setting up Amazon Inspector" class="md-nav__link">
    Setting up Amazon Inspector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-target" title="Configure the Amazon Inspector target" class="md-nav__link">
    Configure the Amazon Inspector target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-template-and-run-the-assessment" title="Configure the Amazon Inspector template and run the assessment" class="md-nav__link">
    Configure the Amazon Inspector template and run the assessment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assess-the-network-layer" title="Assess the Network Layer" class="md-nav__link">
    Assess the Network Layer
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identify-the-application-load-balancer-and-connect-to-the-redteam-host" title="Identify the Application Load Balancer and Connect to the RedTeam Host" class="md-nav__link">
    Identify the Application Load Balancer and Connect to the RedTeam Host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-scanner" title="Using the Scanner" class="md-nav__link">
    Using the Scanner
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../remediate/" title="Remediate Phase" class="md-nav__link">
      Remediate Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../verify/" title="Verify Phase" class="md-nav__link">
      Verify Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cleanup/" title="Cleanup Phase" class="md-nav__link">
      Cleanup Phase
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examine-the-stack-that-you-built" title="Examine the stack that you built" class="md-nav__link">
    Examine the stack that you built
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assess-the-host-layer" title="Assess the Host Layer" class="md-nav__link">
    Assess the Host Layer
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-amazon-inspector" title="Setting up Amazon Inspector" class="md-nav__link">
    Setting up Amazon Inspector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-target" title="Configure the Amazon Inspector target" class="md-nav__link">
    Configure the Amazon Inspector target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-template-and-run-the-assessment" title="Configure the Amazon Inspector template and run the assessment" class="md-nav__link">
    Configure the Amazon Inspector template and run the assessment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assess-the-network-layer" title="Assess the Network Layer" class="md-nav__link">
    Assess the Network Layer
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identify-the-application-load-balancer-and-connect-to-the-redteam-host" title="Identify the Application Load Balancer and Connect to the RedTeam Host" class="md-nav__link">
    Identify the Application Load Balancer and Connect to the RedTeam Host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-scanner" title="Using the Scanner" class="md-nav__link">
    Using the Scanner
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/protecting-workloads-workshop/edit/master/docs/builder-session/assess.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="supercharging-your-workload-defenses-assess-phase">Supercharging your Workload Defenses - Assess Phase</h1>
<div class="admonition info">
<p class="admonition-title">Important note!</p>
<p><strong>We are testing out some new ideas here.  Some things may not work as expected.  We appreciate your patience.</strong></p>
</div>
<p>You have either just deployed a CloudFormation stack or AWS has done so on your behalf at an event.
The CloudFormation stack contains
a PHP website on Amazon EC2 instances behind an application load balancer.
You are now going to assess the posture of the site at both the host layer and at the network layer.</p>
<p>In this section you will do the following tasks:</p>
<ol>
<li>Examine the CloudFormation stack you built to learn about the tags that were applied by AWS CloudFormation.</li>
<li>Learn about Amazon Inspector targets, templates, and rules packages.</li>
<li>Examine Amazon Inspector findings</li>
<li>Assess the network layer by running an external network scan using a network scanner.</li>
</ol>
<h2 id="examine-the-stack-that-you-built">Examine the stack that you built</h2>
<ol>
<li>
<p>At this point, you have either deployed a CloudFormation stack yourself or AWS has done so on your behalf.  You will need the name of this stack to proceed.  Go to the CloudFormation console.  You should see a list of stacks similar to the figure below.</p>
<p><img alt="cloudformation-stack-list" src="../images/assess-cloudformation-stacks.png" /></p>
<p>If the console looks different than this, you may be using a newer version of the console.  In that case, use the menu on the left and click <strong>Previous console</strong>.</p>
<p>If you built the stack yourself, you should see the name you supplied in the Stack Name column.  If AWS built the stack for you, the stack name will likely much longer name, for example it may start with "module" with a random string after that as in the figure above. Make sure you see the entire stack name.  If the stack name ends with three trailing periods ("..."), then widen the Stack Name column so you can see the entire name of the stack.  Copy the stack name into a scratch file on your workstation.</p>
</li>
</ol>
<h2 id="assess-the-host-layer">Assess the Host Layer</h2>
<h3 id="setting-up-amazon-inspector">Setting up Amazon Inspector</h3>
<p>Now that you know the name of your AWS CloudFormation stack, you will configure Amazon Inspector to scan the instance for vilnerabilities.  You will first define the <em>target</em> for inspector, namely the instances that Inspector will scan.  You will then define the <em>template</em> which includes both the <em>target</em> you defined as well as the kinds of scans to run.  You will then run the scan against the template.</p>
<h3 id="configure-the-amazon-inspector-target">Configure the Amazon Inspector target</h3>
<ol>
<li>
<p>Go to the Amazon Inspector console and click <strong>Get Started</strong> if prompted.  If you see a "Welcome to Amazon Inspector" wizard appear, click <strong>Cancel</strong>.  You will set up Amazon Inspector manually so you can become more familiar with the service.</p>
</li>
<li>
<p>Click <strong>Assessment Targets</strong> on the left menu and then click the <strong>Create</strong> button.</p>
</li>
<li>
<p>Scroll down to the Assessment Target window.  In the <em>Name</em> field, enter a name of your choosing, such as <strong>mytargets</strong>.</p>
</li>
<li>
<p>In the <em>Use Tags</em> section, select <strong>aws:cloudformation:stack-name</strong> for the key from the drop down list and select the name of the stack from the drop down value list.  The reason you can do this is that CloudFormation adds a tag named aws:cloudformation:stack-name to every resource that it provisions.  When you configure Amazon Inspector, rather than specifying instance IDs, you will tell Inspector to look for instances with a specific tag.  Suppose that, in a production situation, you have to add more instances to handle a higher load.  Rather than modifying your Inspector target list, you can add the tag to the new instances and the target will then be able to select them automatically.</p>
</li>
<li>
<p>Make sure <em>Install Agents</em> check box is checked. This will cause Amazon Inspector to install the Inspector agent on the instances on your behalf.</p>
</li>
<li>
<p>Click the <strong>Save</strong> button to save the target definition.  Inspector may prompt you for permission to create a service linked role to give the Amazon Inspector service permission to retrieve information about your instances.  If you see a prompt like the one in the figure below, click <strong>Ok</strong> to create the role.</p>
<p><img alt="inspector-service-role" src="../images/assess-inspector-slr.png" /></p>
<p>You have now created an Amazon Inspector target that identifies the instances that would be assessed.  The target selects instances based on tag values.  Again, the tag you are using is <em>aws:cloudformation:stack-name</em> which is set to the name of the CloudFormation stack.</p>
</li>
</ol>
<h3 id="configure-the-amazon-inspector-template-and-run-the-assessment">Configure the Amazon Inspector template and run the assessment</h3>
<p>Now that you have created an Amazon Inspector target, you will now create an Amazon Inspector template.  You use templates to define the Amazon Inspector targets and rule packages that comprise an assessment run.</p>
<ol>
<li>
<p>Go to the Amazon Inspector console, click <strong>Assessment templates</strong> on the menu, and then click <strong>Create</strong>.</p>
</li>
<li>
<p>In the <em>Name</em> field, enter a name for the template, such as <strong>mytemplate</strong>.</p>
</li>
<li>
<p>In the <em>Target name</em> field, select the target you previously created from the list of options.</p>
</li>
<li>
<p>In the <em>Rules packages</em> field, select <strong>Common Vulnerabilities and Exposures</strong> and <strong>Security Best Practices</strong>.</p>
</li>
<li>
<p>In the <em>Duration</em> field, select <strong>15 minutes</strong>.  Do <strong>not</strong> accept the default value!</p>
</li>
<li>
<p>In the Assessment Schedule, uncheck (turn off) the <em>Set up recurring assessment</em> runs so that the assessment template will only run a one-time assessment.</p>
</li>
<li>
<p>Scroll to the bottom and click the <strong>Create and run</strong> button to save the template and run the assessment.  Depending on the size of your screen, you may have to scroll down multiple windows.  If you cannot click <strong>Create and run</strong>, make sure you unchecked the box in the previous step and try again.  The assessment will start and will take 15 minutes to compete.</p>
</li>
<li>
<p>On the Amazon Inspector menu, click <strong>Assessment runs</strong>.  You should see an entry for the assesment you just started.  While the assessment is running, the status will be <em>Collecting data</em>.  Periodically refresh the screen to see the current status.  When the assessment run ends, the status will change to <em>Analysis complete.</em>  The assessment will run for approximately 15 minutes. <strong><em>While you are waiting, continue with the steps below.</em></strong></p>
</li>
</ol>
<h2 id="assess-the-network-layer">Assess the Network Layer</h2>
<h3 id="identify-the-application-load-balancer-and-connect-to-the-redteam-host">Identify the Application Load Balancer and Connect to the RedTeam Host</h3>
<ol>
<li>
<p>Go to the stack outputs and look for the website URL stored in the <strong>albEndpoint</strong> output value. Test access to the site by right clicking and opening in a new tab. Note the URL for your site as this will be used throughout this workshop round.</p>
</li>
<li>
<p>While still in stack outputs, right click the link in <strong>RedTeamHostSession</strong> and open in new tab. This will launch an AWS Systems Manager Session Manager to the host you will use to perform ad hoc scans against your site URL.</p>
</li>
</ol>
<div class="admonition info">
<p class="admonition-title">AWS Systems Manager Session Manager</p>
<p>Session Manager is a fully managed AWS Systems Manager capability that lets you manage your Amazon EC2 instances through an interactive one-click browser-based shell or through the AWS CLI. Session Manager provides secure and auditable instance management without the need to open inbound ports, maintain bastion hosts, or manage SSH keys. </p>
</div>
<h3 id="using-the-scanner">Using the Scanner</h3>
<p>In order to test your AWS WAF ruleset, this lab has been configured with two scanning capabilities; a Red Team Host where you can invoke manual scanning and an automated scanner which runs from outside your lab environment. </p>
<p>The scanner performs 10 basic tests designed to help simulate and mitigate common web attack vectors. </p>
<ol>
<li>Canary GET - This should succeed and shows that the scanner is not being blocked.</li>
<li>Canary POST - This should succeed and shows that the scanner is not being blocked.</li>
<li>SQL Injection (SQLi) attack in Query String</li>
<li>SQL Injection (SQLi) attack in Cookie</li>
<li>Cross Site Scripting (XSS) attack in Query String</li>
<li>Cross Site Scripting (XSS) attack in Body</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Note about Tests</p>
<p><em>These basic tests are designed to provide common examples you can use to test AWS WAF functionality. You should perform thorough analysis and testing when implementing rules into your production environments.</em></p>
</div>
<p>Once you have started a Session Manager connection to your Red Team Host, the scanner script can be invoked by typing the following command while in the <em>/usr/bin</em> directory:</p>
<div class="codehilite"><pre><span></span>python3 scanner.py http://your-alb-endpoint
</pre></div>


<p><img alt="Initial Scan Terminal" src="../images/initial-scan-term.svg" /></p>
<p>The scanner.py script will run each of the tests above and report back the following information:</p>
<ul>
<li><strong>Request</strong>: The HTTP request command used.</li>
<li><strong>Test Name</strong>: The name of the test from list above.</li>
<li><strong>Result</strong>: The HTTP status code returned.</li>
</ul>
<p>The logic in the scanner script color codes the response as follows:</p>
<ul>
<li><strong>Green</strong>: 403 - Forbidden (<em>Except for canary GET and POST tests.</em>)</li>
<li><strong>Red</strong>: 200 - OK</li>
<li><strong>Blue</strong>: 404 - Not Found</li>
<li><strong>Yellow</strong>: 500 - Internal Server Error</li>
</ul>
<p>As you can see by running the script there are several vulnerabilities that need to be addressed. In the remediate phase you will configure an AWS WAF Web ACL to block these requests. When AWS WAF blocks a web request based on the conditions that you specify, it returns HTTP status code 403 (Forbidden). For a full view of the request and response information, you can paste the <strong>Request</strong> command directly into the console and add the --debug argument.</p>
<div class="admonition info">
<p class="admonition-title">Note about Testing Tool</p>
<p>The scanner.py script uses an open source <a href="https://httpie.org/" target="_blank">HTTP client called httpie</a>. HTTPie—aitch-tee-tee-pie—is a command line HTTP client with an intuitive UI, JSON support, syntax highlighting, wget-like downloads, plugins, and more.</p>
</div>
<p><em>This completes the Assess Phase.</em></p>
<hr />
<p>Click <a href="../remediate/">here</a> to proceed to the Remediate Phase.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../build/" title="Build Phase" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Build Phase
              </span>
            </div>
          </a>
        
        
          <a href="../remediate/" title="Remediate Phase" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Remediate Phase
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="http://protecting-workloads.awssecworkshops.com/" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/security/" class="md-footer-social__link fa fa-shield"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" class="md-footer-social__link fa fa-rss"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>